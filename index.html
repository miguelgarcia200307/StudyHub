<!DOCTYPE html>    <!-- CSS personalizado modular -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/subjects.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/tasks.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/login.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>StudyHub - Gestión Académica</title>
    
    <!-- Fuentes de Google -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    
    <!-- CSS personalizado modular -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/subjects.css">
    <link rel="stylesheet" href="css/tasks.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/mobile-optimizations.css">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Cargando StudyHub...</p>
    </div>

    <!-- Modal de login/registro -->
    <div id="auth-modal" class="modal active">
        <div class="modal-content">
            <div class="auth-container">
                <!-- Lado izquierdo - Logo y branding -->
                <div class="auth-left">
                    <img src="img/LOGO STUDI.png" alt="StudyHub Logo" class="logo">
                    <h1>StudyHub</h1>
                    <p>Tu plataforma de gestión académica colaborativa</p>
                </div>

                <!-- Lado derecho - Formularios -->
                <div class="auth-right">
                    <!-- Formulario de Login -->
                    <div id="login-form" class="auth-form active">
                        <h2>Iniciar Sesión</h2>
                        <p class="subtitle">Accede a tu cuenta</p>
                        <form id="loginForm">
                            <div class="form-group">
                                <i class="fas fa-user"></i>
                                <input type="text" id="login-username" placeholder="Usuario o email" required>
                                <small class="form-help">Ingresa tu usuario o email.</small>
                            </div>
                            <div class="form-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="login-password" placeholder="Contraseña" required>
                            </div>
                            <div class="forgot-password-section">
                                <a href="#" class="forgot-password-link" onclick="showForgotPassword()">
                                    <i class="fas fa-key"></i>
                                    ¿Olvidaste tu contraseña?
                                </a>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-sign-in-alt"></i>
                                <span>Iniciar Sesión</span>
                                <div class="loading-spinner" style="display: none;"></div>
                            </button>
                        </form>
                        <p class="auth-info">
                            <i class="fas fa-users"></i>
                            StudyHub: Colabora en asignaturas con tus compañeros. Crea asignaturas e invita a quien quieras.
                        </p>
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline btn-register" onclick="showRegister()">
                                <i class="fas fa-user-plus"></i>
                                ¿No tienes cuenta? Crear cuenta gratis
                            </button>
                        </div>
                    </div>

                    <!-- Formulario de Recuperar Contraseña -->
                    <div id="forgot-password-form" class="auth-form">
                        <h2>Recuperar Contraseña</h2>
                        <p class="subtitle">Te enviaremos un enlace para restablecer tu contraseña</p>
                        <div class="forgot-notice">
                            <i class="fas fa-shield-alt"></i>
                            <p>Ingresa tu email y te enviaremos las instrucciones</p>
                        </div>
                        
                        <form id="forgotPasswordForm">
                            <div class="form-group">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="forgot-email" placeholder="Correo electrónico" required>
                                <small class="form-help">Ingresa el email asociado a tu cuenta</small>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                <span>Enviar Enlace de Recuperación</span>
                                <div class="loading-spinner" style="display: none;"></div>
                            </button>
                        </form>
                        
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline" onclick="showLogin()">
                                <i class="fas fa-arrow-left"></i>
                                Volver al Login
                            </button>
                            <button type="button" class="btn btn-outline btn-register" onclick="showRegister()">
                                <i class="fas fa-user-plus"></i>
                                ¿No tienes cuenta? Crear cuenta
                            </button>
                        </div>
                    </div>

                    <!-- Formulario de Registro -->
                    <div id="register-form" class="auth-form">
                        <h2>Crear Cuenta</h2>
                        <p class="subtitle">Únete a StudyHub</p>
                        <div class="register-notice">
                            <i class="fas fa-users"></i>
                            <p>Registro libre - Colabora por asignaturas</p>
                        </div>
                        
                        <!-- Paso 1: Información Personal -->
                        <div id="register-step-1" class="register-step active">
                            <div class="step-indicator">
                                <span class="step active">1</span>
                                <span class="step-divider"></span>
                                <span class="step">2</span>
                            </div>
                            <h3>Información Personal</h3>
                            <form id="registerStepOneForm">
                                <div class="form-group">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="register-name" placeholder="Nombre completo" required>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="register-email" placeholder="Correo electrónico" required>
                                    <small class="form-help">Para confirmación y notificaciones</small>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-graduation-cap"></i>
                                    <input type="text" id="register-career" placeholder="Carrera" required>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-calendar"></i>
                                    <input type="text" id="register-semester" placeholder="Semestre" required>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-arrow-right"></i>
                                    <span>Continuar</span>
                                </button>
                            </form>
                        </div>
                        
                        <!-- Paso 2: Crear Contraseña -->
                        <div id="register-step-2" class="register-step">
                            <div class="step-indicator">
                                <span class="step completed">1</span>
                                <span class="step-divider completed"></span>
                                <span class="step active">2</span>
                            </div>
                            <h3>Crear Contraseña</h3>
                            <form id="registerStepTwoForm">
                                <div class="form-group">
                                    <i class="fas fa-lock"></i>
                                    <div class="password-input-container">
                                        <input type="password" id="register-password" placeholder="Contraseña" required>
                                        <button type="button" class="password-toggle" id="password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength" id="password-strength">
                                        <div class="strength-meter">
                                            <div class="strength-bar" id="strength-bar"></div>
                                        </div>
                                        <span class="strength-text" id="strength-text">Ingresa una contraseña</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-lock"></i>
                                    <div class="password-input-container">
                                        <input type="password" id="register-confirm-password" placeholder="Confirmar contraseña" required>
                                        <button type="button" class="password-toggle" id="confirm-password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-match" id="password-match"></div>
                                </div>
                                
                                <!-- Términos y Condiciones -->
                                <div class="terms-section">
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="terms-checkbox" required>
                                            <span class="checkmark"></span>
                                            <span class="checkbox-text">
                                                He leído y acepto los 
                                                <a href="#" class="terms-link" onclick="openTermsModal()">Términos y Condiciones</a>
                                                y las 
                                                <a href="#" class="privacy-link" onclick="openPrivacyModal()">Políticas de Privacidad</a>
                                                de StudyHub.live
                                            </span>
                                        </label>
                                    </div>
                                    <div class="terms-error" id="terms-error" style="display: none;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        Debes aceptar los términos y condiciones para crear tu cuenta
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" id="back-to-step-1">
                                        <i class="fas fa-arrow-left"></i>
                                        Atrás
                                    </button>
                                    <button type="submit" class="btn btn-primary" id="create-account-btn" disabled>
                                        <i class="fas fa-user-plus"></i>
                                        <span>Crear Cuenta</span>
                                        <div class="loading-spinner" style="display: none;"></div>
                                    </button>
                                </div>
                            </form>
                            <small class="form-help">Después podrás personalizar tu perfil y crear asignaturas.</small>
                        </div>
                        
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline btn-login" onclick="showLogin()">
                                <i class="fas fa-sign-in-alt"></i>
                                ¿Ya tienes cuenta? Inicia sesión
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplicación principal -->
    <div id="app" class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="img/LOGO STUDI.png" alt="StudyHub Logo" class="sidebar-logo">
                <h3>StudyHub</h3>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" data-section="dashboard" class="nav-link active">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="calendar" class="nav-link">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Calendario</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="subjects" class="nav-link">
                            <i class="fas fa-book"></i>
                            <span>Asignaturas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="notes" class="nav-link">
                            <i class="fas fa-sticky-note"></i>
                            <span>Notas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="tasks" class="nav-link">
                            <i class="fas fa-tasks"></i>
                            <span>Tareas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="profile" class="nav-link">
                            <i class="fas fa-user"></i>
                            <span>Perfil</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar-container">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="16" cy="16" r="16" fill="#667eea"/>
                            <circle cx="16" cy="12" r="5" fill="white"/>
                            <path d="M6 26c0-5.5 4.5-10 10-10s10 4.5 10 10" fill="white"/>
                        </svg>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="user-name">Usuario</span>
                        <span class="user-email" id="user-email">email@ejemplo.com</span>
                    </div>
                </div>
                <button class="btn btn-outline logout-btn" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="theme-toggle">
                        <button id="theme-toggle" class="btn btn-outline">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                    <div class="notifications">
                        <button class="btn btn-outline" id="notifications-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notification-badge">0</span>
                        </button>
                    </div>
                    <!-- Botón global para usar código (visible en toda la app) -->
                    <button id="use-access-code-topbtn" class="btn btn-primary" type="button"
                            onclick="document.getElementById('access-code-modal').classList.add('active'); setTimeout(()=>{ const i = document.getElementById('access-code-input'); if(i) i.focus(); },100);">
                        <i class="fas fa-key"></i>
                        🔑 USAR CÓDIGO
                    </button>
                </div>
            </header>

            <!-- Contenido de las secciones -->
            <div class="content">
                <!-- Dashboard -->
                <section id="dashboard-section" class="content-section active">
                    <!-- SVG Definitions for Gradients -->
                    <svg class="dashboard-svg-defs">
                        <defs>
                            <linearGradient id="gradient-primary" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-success" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-warning" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#43e97b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#38f9d7;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-danger" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>

                    <div class="dashboard-container">
                        <div class="dashboard-content">
                            <div class="dashboard-grid">
                                <!-- Estadísticas Generales -->
                                <div class="dashboard-grid-item stats-overview animate-fadeInUp">
                                    <div class="card-header-modern">
                                        <div class="card-title-modern">
                                            <div class="card-title-icon">
                                                <i class="fas fa-chart-line"></i>
                                            </div>
                                            Resumen General
                                        </div>
                                        <div class="card-actions-modern">
                                            <button class="btn-modern btn-ghost btn-icon tooltip-modern" data-tooltip="Actualizar estadísticas" id="refresh-stats-btn">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="stats-container">
                                        <div class="stat-card hover-shadow-lift" data-section="subjects">
                                            <div class="stat-card-header">
                                                <div class="stat-icon subjects">
                                                    <i class="fas fa-book"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="total-subjects">0</div>
                                            <div class="stat-label">Asignaturas</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-up"></i>
                                                </div>
                                                <span>+2 esta semana</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="tasks">
                                            <div class="stat-card-header">
                                                <div class="stat-icon tasks">
                                                    <i class="fas fa-tasks"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="pending-tasks">0</div>
                                            <div class="stat-label">Tareas Pendientes</div>
                                            <div class="stat-change negative">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-down"></i>
                                                </div>
                                                <span>-3 desde ayer</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="notes">
                                            <div class="stat-card-header">
                                                <div class="stat-icon notes">
                                                    <i class="fas fa-sticky-note"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="total-notes">0</div>
                                            <div class="stat-label">Notas Guardadas</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-up"></i>
                                                </div>
                                                <span>+5 hoy</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="calendar">
                                            <div class="stat-card-header">
                                                <div class="stat-icon events">
                                                    <i class="fas fa-calendar-check"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="upcoming-events">0</div>
                                            <div class="stat-label">Eventos Próximos</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-calendar-plus"></i>
                                                </div>
                                                <span>Esta semana</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Acciones Rápidas -->
                                <div class="dashboard-grid-item quick-actions animate-fadeInUp animate-delay-100">
                                    <div class="quick-actions-container">
                                        <div class="quick-actions-header">
                                            <h3 class="quick-actions-title">Acciones Rápidas</h3>
                                        </div>
                                        <div class="quick-actions-grid">
                                            <div class="quick-action-card" data-action="new-subject">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-book-open"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Asignatura</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-event">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-calendar-plus"></i>
                                                </div>
                                                <span class="quick-action-label">Nuevo Evento</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-note">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-sticky-note"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Nota</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-task">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-plus-circle"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Tarea</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actividad Reciente -->
                                <div class="dashboard-grid-item recent-activity animate-fadeInUp animate-delay-200">
                                    <div class="activity-container">
                                        <div class="activity-header">
                                            <h3 class="activity-title">Actividad Reciente</h3>
                                            <button class="btn-modern btn-ghost btn-icon" id="refresh-activity-btn">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                        <div class="activity-list" id="recent-activity">
                                            <!-- Se llena dinámicamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Tareas Próximas -->
                                <div class="dashboard-grid-item upcoming-tasks animate-fadeInUp animate-delay-300">
                                    <div class="tasks-container">
                                        <div class="tasks-header">
                                            <h3 class="tasks-title">Próximas Tareas</h3>
                                            <button class="btn-modern btn-primary btn-sm" id="add-quick-task-btn">
                                                <i class="fas fa-plus"></i>
                                                Nueva
                                            </button>
                                        </div>
                                        <div class="tasks-list" id="upcoming-tasks-list">
                                            <!-- Se llena dinámicamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Progreso de Tareas -->
                                <div class="dashboard-grid-item progress-overview animate-fadeInUp animate-delay-100">
                                    <div class="card-header-modern">
                                        <div class="card-title-modern">
                                            <div class="card-title-icon">
                                                <i class="fas fa-chart-pie"></i>
                                            </div>
                                            Progreso de Tareas
                                        </div>
                                    </div>
                                    <div class="progress-container">
                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill pending" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-pending-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-pending-percentage">0%</div>
                                                    <div class="progress-count" id="progress-pending-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">Pendientes</div>
                                        </div>

                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill in-progress" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-in-progress-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-in-progress-percentage">0%</div>
                                                    <div class="progress-count" id="progress-in-progress-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">En Progreso</div>
                                        </div>

                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill completed" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-completed-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-completed-percentage">0%</div>
                                                    <div class="progress-count" id="progress-completed-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">Completadas</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Mini Calendario -->
                                <div class="dashboard-grid-item calendar-preview animate-fadeInUp animate-delay-200">
                                    <div class="calendar-preview-container">
                                        <div class="card-header-modern">
                                            <div class="card-title-modern">
                                                <div class="card-title-icon">
                                                    <i class="fas fa-calendar-alt"></i>
                                                </div>
                                                Calendario
                                            </div>
                                            <button class="btn-modern btn-outline btn-sm" data-section="calendar">
                                                Ver todo
                                            </button>
                                        </div>
                                        <div class="calendar-mini">
                                            <div class="calendar-header">
                                                <button class="calendar-nav-btn" id="prev-month">
                                                    <i class="fas fa-chevron-left"></i>
                                                </button>
                                                <div class="calendar-month" id="current-month">Agosto 2025</div>
                                                <button class="calendar-nav-btn" id="next-month">
                                                    <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                            <div class="calendar-grid" id="mini-calendar-grid">
                                                <!-- Se genera dinámicamente -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Centro de Notificaciones -->
                                <div class="dashboard-grid-item notifications-center animate-fadeInUp animate-delay-300">
                                    <div class="notifications-container">
                                        <div class="card-header-modern">
                                            <div class="card-title-modern">
                                                <div class="card-title-icon">
                                                    <i class="fas fa-bell"></i>
                                                </div>
                                                Notificaciones
                                            </div>
                                        </div>
                                        <div class="card-body-modern" id="notifications-container">
                                            <!-- Se llena dinámicamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Calendario -->
                <section id="calendar-section" class="content-section">
                    <div class="section-header">
                        <h2>Calendario Profesional</h2>
                        <button class="btn btn-primary" id="add-event-btn">
                            <i class="fas fa-plus"></i>
                            Nuevo Evento
                        </button>
                    </div>
                    
                    <div class="calendar-container">
                        <div class="calendar-content">
                            <div id="calendar"></div>
                        </div>
                    </div>
                </section>

                <!-- Asignaturas -->
                <section id="subjects-section" class="content-section">
                    <div class="section-header">
                        <h2>Asignaturas</h2>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="use-access-code-btn">
                                <i class="fas fa-key"></i>
                                Usar Código
                            </button>
                            <button class="btn btn-primary" id="add-subject-btn">
                                <i class="fas fa-plus"></i>
                                Nueva Asignatura
                            </button>
                        </div>
                    </div>
                    <div class="subjects-grid" id="subjects-grid">
                        <!-- Se llena dinámicamente -->
                    </div>
                </section>

                <!-- Notas -->
                <section id="notes-section" class="content-section">
                    <div class="section-header">
                        <h2>Notas</h2>
                        <div class="notes-actions">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="notes-search" placeholder="Buscar notas...">
                            </div>
                            <button class="btn btn-primary" id="add-note-btn">
                                <i class="fas fa-plus"></i>
                                Nueva Nota
                            </button>
                        </div>
                    </div>
                    <div class="notes-grid" id="notes-grid">
                        <!-- Se llena dinámicamente -->
                    </div>
                </section>

                <!-- Tareas -->
                <section id="tasks-section" class="content-section">
                    <!-- Header profesional de tareas -->
                    <div class="tasks-header">
                        <div class="tasks-header-content">
                            <div class="tasks-title">
                                <i class="fas fa-tasks"></i>
                                <h2>Gestión de Tareas</h2>
                            </div>
                            <div class="tasks-stats">
                                <div class="task-stat-pill">
                                    <i class="fas fa-list-check"></i>
                                    <span id="total-tasks-count">0</span> Total
                                </div>
                                <div class="task-stat-pill">
                                    <i class="fas fa-clock"></i>
                                    <span id="pending-tasks-count">0</span> Pendientes
                                </div>
                                <div class="task-stat-pill">
                                    <i class="fas fa-check-circle"></i>
                                    <span id="completed-tasks-count">0</span> Completadas
                                </div>
                            </div>
                            <div class="view-toggle">
                                <button class="view-toggle-btn active" data-view="list">
                                    <i class="fas fa-list"></i>
                                    Lista
                                </button>
                                <button class="view-toggle-btn" data-view="grid">
                                    <i class="fas fa-th-large"></i>
                                    Tarjetas
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Controles superiores -->
                    <div class="section-controls">
                        <div class="tasks-filters">
                            <button class="filter-btn active" data-filter="all">
                                <i class="fas fa-list"></i>
                                Todas
                            </button>
                            <button class="filter-btn" data-filter="pending">
                                <i class="fas fa-clock"></i>
                                Pendientes
                            </button>
                            <button class="filter-btn" data-filter="in-progress">
                                <i class="fas fa-spinner"></i>
                                En Progreso
                            </button>
                            <button class="filter-btn" data-filter="completed">
                                <i class="fas fa-check-circle"></i>
                                Completadas
                            </button>
                        </div>
                        <button class="btn btn-primary" id="add-task-btn">
                            <i class="fas fa-plus"></i>
                            Nueva Tarea
                        </button>
                    </div>

                    <!-- Contenedor de tareas -->
                    <div class="tasks-container">
                        <div class="tasks-list" id="tasks-list">
                            <!-- Se llena dinámicamente -->
                        </div>
                    </div>
                </section>

                <!-- Perfil -->
                <section id="profile-section" class="content-section">
                    <!-- Header profesional del perfil -->
                    <div class="profile-header-modern">
                        <div class="profile-title">
                            <i class="fas fa-user-circle"></i>
                            <h2>Perfil de Usuario</h2>
                        </div>
                        <div class="profile-subtitle">
                            <p>Gestiona tu información personal y preferencias de cuenta</p>
                        </div>
                    </div>
                    
                    <div class="profile-container">
                        <div class="card profile-card">
                            <div class="profile-header">
                                <div class="profile-avatar-modern">
                                    <div class="avatar-container-modern">
                                        <div class="avatar-image-modern" id="profile-avatar">
                                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="40" cy="40" r="40" fill="#667eea"/>
                                                <circle cx="40" cy="30" r="12" fill="white"/>
                                                <path d="M15 65c0-13.8 11.2-25 25-25s25 11.2 25 25" fill="white"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <button class="avatar-upload-btn" id="avatar-upload-btn">
                                        <i class="fas fa-camera"></i>
                                    </button>
                                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                                </div>
                                <div class="profile-info">
                                    <h3 id="profile-name">Nombre del Usuario</h3>
                                    <p id="profile-email">
                                        <i class="fas fa-envelope"></i>
                                        email@ejemplo.com
                                    </p>
                                    <span class="profile-role member" id="profile-role">
                                        <i class="fas fa-user"></i>
                                        Miembro
                                    </span>
                                </div>
                            </div>
                            
                            <form id="profile-form" class="profile-form">
                                <div class="form-group">
                                    <label for="profile-name-input">
                                        <i class="fas fa-user"></i>
                                        Nombre completo
                                    </label>
                                    <input type="text" id="profile-name-input" placeholder="Ingresa tu nombre completo" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-career-input">
                                        <i class="fas fa-graduation-cap"></i>
                                        Carrera
                                    </label>
                                    <input type="text" id="profile-career-input" placeholder="Ej: Ingeniería en Sistemas" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-semester-input">
                                        <i class="fas fa-calendar-alt"></i>
                                        Semestre
                                    </label>
                                    <input type="text" id="profile-semester-input" placeholder="Ej: 5to Semestre" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-username-input">
                                        <i class="fas fa-at"></i>
                                        Usuario
                                    </label>
                                    <div class="username-group">
                                        <input type="text" id="profile-username-input" placeholder="Define tu username único">
                                        <button type="button" class="btn btn-outline" id="activate-username-profile-btn">
                                            <i class="fas fa-user-check"></i>
                                            Activar Username
                                        </button>
                                    </div>
                                    <small class="form-help" id="profile-username-help">
                                        <i class="fas fa-info-circle"></i>
                                        Debe tener 3-50 caracteres: letras, números o guión bajo (_)
                                    </small>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i>
                                    Guardar Cambios
                                </button>
                            </form>
                        </div>
                        
                        <!-- Sección de Seguridad -->
                        <div class="card security-card">
                            <div class="card-header">
                                <h3>
                                    <i class="fas fa-shield-alt"></i>
                                    Seguridad de la Cuenta
                                </h3>
                                <p>Gestiona la seguridad de tu cuenta</p>
                            </div>
                            
                            <!-- Cambiar Contraseña -->
                            <div class="security-section">
                                <h4>
                                    <i class="fas fa-key"></i>
                                    Cambiar Contraseña
                                </h4>
                                <p class="section-description">Actualiza tu contraseña para mantener tu cuenta segura</p>
                                
                                <form id="change-password-form" class="change-password-form">
                                    <div class="form-group">
                                        <label for="current-password">
                                            <i class="fas fa-lock"></i>
                                            Contraseña Actual
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="current-password" placeholder="Ingresa tu contraseña actual" required>
                                            <button type="button" class="password-toggle" data-target="current-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="new-password">
                                            <i class="fas fa-key"></i>
                                            Nueva Contraseña
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="new-password" placeholder="Ingresa tu nueva contraseña" required>
                                            <button type="button" class="password-toggle" data-target="new-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-strength" id="new-password-strength">
                                            <div class="strength-meter">
                                                <div class="strength-bar" id="new-password-strength-bar"></div>
                                            </div>
                                            <span class="strength-text" id="new-password-strength-text">Ingresa una nueva contraseña</span>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="confirm-new-password">
                                            <i class="fas fa-check-double"></i>
                                            Confirmar Nueva Contraseña
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="confirm-new-password" placeholder="Confirma tu nueva contraseña" required>
                                            <button type="button" class="password-toggle" data-target="confirm-new-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-match" id="new-password-match"></div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Actualizar Contraseña</span>
                                            <div class="loading-spinner" style="display: none;"></div>
                                        </button>
                                        <button type="button" class="btn btn-outline" id="cancel-password-change">
                                            <i class="fas fa-times"></i>
                                            Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Información de Seguridad -->
                            <div class="security-info">
                                <div class="security-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <div>
                                        <strong>Consejo de Seguridad:</strong>
                                        <p>Usa una contraseña fuerte con al menos 8 caracteres, incluyendo mayúsculas, minúsculas, números y símbolos.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Sección de Colaboración -->
                        <div class="card invite-card">
                            <div class="card-header">
                                <h3>
                                    <i class="fas fa-users"></i>
                                    Colaboración por Asignaturas
                                </h3>
                                <p>Invita colaboradores específicos para cada asignatura</p>
                            </div>
                            <div class="card-body">
                                <div class="collaboration-info">
                                    <div class="info-item">
                                        <i class="fas fa-graduation-cap"></i>
                                        <div>
                                            <strong>Asignaturas Propias</strong>
                                            <p>Crea asignaturas e invita a quienes quieras que colaboren contigo</p>
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <i class="fas fa-handshake"></i>
                                        <div>
                                            <strong>Colaboraciones</strong>
                                            <p>Únete a asignaturas cuando otros te inviten a colaborar</p>
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <i class="fas fa-share-alt"></i>
                                        <div>
                                            <strong>Gestionar Colaboradores</strong>
                                            <p>Desde cada asignatura puedes invitar o gestionar colaboradores</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="collaboration-actions">
                                    <button type="button" class="btn btn-primary" onclick="switchToSection('subjects')">
                                        <i class="fas fa-graduation-cap"></i>
                                        Ver Mis Asignaturas
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <!-- Modal para eventos -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-calendar-alt"></i>
                    <h3 id="event-modal-title">Nuevo Evento</h3>
                </div>
                <button class="modal-close" onclick="closeModal('event-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="event-form">
                    <div class="form-group">
                        <label for="event-title">
                            <i class="fas fa-heading"></i>
                            Título
                        </label>
                        <input type="text" id="event-title" placeholder="Nombre del evento..." required>
                    </div>
                    <div class="form-group">
                        <label for="event-description">
                            <i class="fas fa-align-left"></i>
                            Descripción
                        </label>
                        <textarea id="event-description" rows="3" placeholder="Describe los detalles del evento..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-start-date">
                                <i class="fas fa-clock"></i>
                                Fecha de inicio
                            </label>
                            <input type="datetime-local" id="event-start-date" required>
                        </div>
                        <div class="form-group">
                            <label for="event-end-date">
                                <i class="fas fa-clock"></i>
                                Fecha de fin
                            </label>
                            <input type="datetime-local" id="event-end-date" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-type">
                                <i class="fas fa-tag"></i>
                                Tipo
                            </label>
                            <select id="event-type" required>
                                <option value="">Seleccionar tipo...</option>
                                <option value="exam">📝 Examen</option>
                                <option value="assignment">📋 Trabajo</option>
                                <option value="class">🎓 Clase</option>
                                <option value="personal">👤 Personal</option>
                                <option value="other">📌 Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="event-subject">
                                <i class="fas fa-book"></i>
                                Asignatura
                            </label>
                            <select id="event-subject">
                                <option value="">Sin asignatura específica</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('event-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="button" id="delete-event-btn" class="btn btn-danger" style="display: none;" onclick="window.calendarManager.deleteCurrentEvent()">
                            <i class="fas fa-trash-alt"></i>
                            Eliminar Evento
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Evento
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para asignaturas -->
    <div id="subject-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-graduation-cap"></i>
                    <h3 id="subject-modal-title">Nueva Asignatura</h3>
                </div>
                <button class="modal-close" onclick="closeModal('subject-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="subject-form">
                    <div class="form-group">
                        <label for="subject-name">
                            <i class="fas fa-book"></i>
                            Nombre de la Asignatura
                        </label>
                        <input type="text" id="subject-name" placeholder="Ej: Matemáticas Avanzadas" required>
                    </div>
                    <div class="form-group">
                        <label for="subject-professor">
                            <i class="fas fa-user-tie"></i>
                            Profesor
                        </label>
                        <input type="text" id="subject-professor" placeholder="Nombre del profesor" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subject-schedule">
                                <i class="fas fa-clock"></i>
                                Horario
                            </label>
                            <input type="text" id="subject-schedule" placeholder="Ej: Lunes 8:00-10:00" required>
                        </div>
                        <div class="form-group">
                            <label for="subject-room">
                                <i class="fas fa-door-open"></i>
                                Salón
                            </label>
                            <input type="text" id="subject-room" placeholder="Ej: A-203" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="subject-color">
                            <i class="fas fa-palette"></i>
                            Color Identificativo
                        </label>
                        <input type="color" id="subject-color" value="#3498db">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('subject-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Asignatura
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para notas -->
    <div id="note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-sticky-note"></i>
                    <h3 id="note-modal-title">Nueva Nota</h3>
                </div>
                <button class="modal-close" onclick="closeModal('note-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="note-form">
                    <div class="form-group">
                        <label for="note-title">
                            <i class="fas fa-heading"></i>
                            Título de la Nota
                        </label>
                        <input type="text" id="note-title" placeholder="Título descriptivo de tu nota" required>
                    </div>
                    <div class="form-group">
                        <label for="note-content">
                            <i class="fas fa-edit"></i>
                            Contenido
                        </label>
                        <textarea id="note-content" rows="8" placeholder="Escribe el contenido de tu nota aquí..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="note-subject">
                            <i class="fas fa-tag"></i>
                            Asignatura
                        </label>
                        <select id="note-subject">
                            <option value="">Sin asignatura</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('note-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Nota
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para tareas -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-tasks"></i>
                    <h3 id="task-modal-title">Nueva Tarea</h3>
                </div>
                <button class="modal-close" onclick="closeModal('task-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="task-form">
                <div class="form-group">
                    <label for="task-title">
                        <i class="fas fa-heading"></i>
                        Título de la Tarea
                    </label>
                    <input type="text" id="task-title" placeholder="Escribe el título de tu tarea..." required>
                </div>
                
                <div class="form-group">
                    <label for="task-description">
                        <i class="fas fa-align-left"></i>
                        Descripción
                    </label>
                    <textarea id="task-description" rows="4" placeholder="Describe los detalles de la tarea..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-due-date">
                            <i class="fas fa-calendar-alt"></i>
                            Fecha límite
                        </label>
                        <input type="datetime-local" id="task-due-date" required>
                    </div>
                    <div class="form-group">
                        <label for="task-priority">
                            <i class="fas fa-exclamation-triangle"></i>
                            Prioridad
                        </label>
                        <select id="task-priority" required>
                            <option value="low">🟢 Baja</option>
                            <option value="medium" selected>🟡 Media</option>
                            <option value="high">🔴 Alta</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-subject">
                            <i class="fas fa-book"></i>
                            Asignatura
                        </label>
                        <select id="task-subject">
                            <option value="">📚 Sin asignatura específica</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-status">
                            <i class="fas fa-check-circle"></i>
                            Estado
                        </label>
                        <select id="task-status">
                            <option value="pendiente">⏳ Pendiente</option>
                            <option value="en_progreso">🔄 En Progreso</option>
                            <option value="terminado">✅ Terminado</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('task-modal')">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Guardar Tarea
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- Modal para gestionar colaboradores -->
    <div id="collaborators-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-users"></i>
                    <h3 id="collaborators-modal-title">Gestionar Colaboradores</h3>
                </div>
                <button class="modal-close" onclick="closeCollaboratorsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Información de la asignatura -->
                <div class="subject-info">
                    <h4 id="collab-subject-name">Nombre de la Asignatura</h4>
                    <p id="collab-subject-details">Profesor • Horario</p>
                </div>
                
                <!-- Sección para generar códigos de acceso -->
                <div class="invite-section">
                    <h5><i class="fas fa-key"></i> Generar Código de Acceso</h5>
                    <p class="section-description">Crea un código único para que otros puedan unirse a esta asignatura</p>
                    
                    <div class="form-group">
                        <label for="access-code-message">Descripción (opcional)</label>
                        <textarea id="access-code-message" rows="2" placeholder="Agrega una descripción del código..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="access-code-days">Validez del código</label>
                        <select id="access-code-days">
                            <option value="1">1 día</option>
                            <option value="3">3 días</option>
                            <option value="7" selected>7 días</option>
                            <option value="30">30 días</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary" id="generate-access-code-btn">
                        <i class="fas fa-key"></i>
                        <span>Generar Código</span>
                        <div class="loading-spinner" style="display: none;"></div>
                    </button>
                    
                    <!-- Mostrar código generado -->
                    <div id="generated-code-section" class="generated-code" style="display: none;">
                        <div class="code-display">
                            <label>Código de Acceso Generado:</label>
                            <div class="code-value">
                                <span id="access-code-value">XXXX-XXXX</span>
                                <button type="button" class="btn btn-sm btn-outline" onclick="copyAccessCode()">
                                    <i class="fas fa-copy"></i>
                                    Copiar
                                </button>
                            </div>
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                Comparte este código para que otros puedan unirse a la asignatura
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Lista de colaboradores actuales -->
                <div class="collaborators-section">
                    <h5><i class="fas fa-users"></i> Colaboradores Actuales</h5>
                    <div id="collaborators-list" class="collaborators-list">
                        <!-- Se llena dinámicamente -->
                    </div>
                </div>

                <!-- Códigos de acceso activos -->
                <div class="active-codes-section">
                    <h5><i class="fas fa-key"></i> Códigos de Acceso Activos</h5>
                    <div id="active-codes-list" class="active-codes-list">
                        <!-- Se llena dinámicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para usar código de acceso -->
    <div id="access-code-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-key"></i>
                    <h3>Usar Código de Acceso</h3>
                </div>
                <button class="modal-close" onclick="closeModal('access-code-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Ingresa el código de acceso que te compartieron para unirte a una asignatura.
                </p>
                <form id="use-access-code-form">
                    <div class="form-group">
                        <label for="access-code-input">Código de Acceso</label>
                        <input type="text" id="access-code-input" placeholder="XXXX-XXXX" required maxlength="9" style="text-transform: uppercase;">
                        <small class="form-help">El código tiene el formato XXXX-XXXX</small>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('access-code-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Unirse</span>
                            <div class="loading-spinner" style="display: none;"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para confirmar eliminación -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="confirm-modal-title">Confirmar Acción</h3>
                <button class="modal-close" onclick="closeModal('confirm-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message">¿Estás seguro de que quieres realizar esta acción?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="closeModal('confirm-modal')">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
                <button type="button" id="confirm-modal-action" class="btn btn-danger">
                    <i class="fas fa-check"></i>
                    <span>Confirmar</span>
                    <div class="loading-spinner" style="display: none;"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Scripts de la aplicación -->
    <script src="js/loading-utils.js"></script>
    <script src="js/db.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/subjects.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Script de configuración de base de datos de prueba -->
    <script src="db/setup-test-db.js"></script>

    <!-- Inicializar Calendar Manager -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Inicializando Calendar Manager...');
            if (typeof CalendarManager !== 'undefined') {
                window.calendarManager = new CalendarManager();
                console.log('Calendar Manager inicializado correctamente');
            } else {
                console.error('CalendarManager no está definido');
            }
            
            // Asegurar que el botón "Usar Código" funcione
            console.log('Verificando botón usar código...');
            
            function initUseCodeButton() {
                const useCodeBtn = document.getElementById('use-access-code-btn');
                console.log('Botón usar código encontrado:', useCodeBtn);
                
                if (useCodeBtn) {
                    // Remover listeners anteriores
                    const newBtn = useCodeBtn.cloneNode(true);
                    useCodeBtn.parentNode.replaceChild(newBtn, useCodeBtn);
                    
                    newBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Click en botón usar código');
                        
                        // Mostrar modal
                        const modal = document.getElementById('access-code-modal');
                        if (modal) {
                            // Limpiar formulario
                            const input = document.getElementById('access-code-input');
                            if (input) input.value = '';
                            
                            // Mostrar modal
                            modal.classList.add('active');
                            
                            // Focus en el input
                            setTimeout(() => {
                                if (input) input.focus();
                            }, 100);
                            
                            console.log('Modal de código de acceso mostrado');
                        } else {
                            console.error('Modal access-code-modal no encontrado');
                        }
                    });
                    
                    console.log('Event listener agregado al botón usar código');
                } else {
                    console.log('Botón no encontrado, creando...');
                    createUseCodeButton();
                }
            }
            
            function createUseCodeButton() {
                const headerActions = document.querySelector('.header-actions');
                if (headerActions && !document.getElementById('use-access-code-btn')) {
                    console.log('Creando botón usar código...');
                    
                    const useCodeBtn = document.createElement('button');
                    useCodeBtn.id = 'use-access-code-btn';
                    useCodeBtn.className = 'btn btn-outline';
                    useCodeBtn.innerHTML = '<i class="fas fa-key"></i> Usar Código';
                    
                    useCodeBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Click en botón usar código (creado)');
                        
                        const modal = document.getElementById('access-code-modal');
                        if (modal) {
                            const input = document.getElementById('access-code-input');
                            if (input) input.value = '';
                            modal.classList.add('active');
                            setTimeout(() => {
                                if (input) input.focus();
                            }, 100);
                        }
                    });
                    
                    // Insertar antes del botón "Nueva Asignatura"
                    const addBtn = document.getElementById('add-subject-btn');
                    if (addBtn) {
                        headerActions.insertBefore(useCodeBtn, addBtn);
                    } else {
                        headerActions.appendChild(useCodeBtn);
                    }
                    
                    console.log('Botón usar código creado y agregado');
                }
            }
            
            // Intentar inicializar
            setTimeout(initUseCodeButton, 100);
            setTimeout(initUseCodeButton, 500);
            setTimeout(initUseCodeButton, 1000);
        });
    </script>

    <!-- Modal de Términos y Condiciones -->
    <div id="terms-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Términos y Condiciones - StudyHub.live</h2>
                <button class="modal-close" onclick="closeTermsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="terms-content">
                    <h3>1. Aceptación de los Términos</h3>
                    <p>Al acceder y utilizar StudyHub.live (en adelante, "la Plataforma"), aceptas cumplir con estos Términos y Condiciones. Si no estás de acuerdo con alguno de ellos, por favor no utilices nuestra Plataforma.</p>
                    
                    <h3>2. Objeto de la Plataforma</h3>
                    <p>StudyHub.live es una plataforma de gestión académica colaborativa que permite a los usuarios crear, compartir y colaborar en asignaturas, notas, tareas, eventos y más. El propósito es brindar un entorno educativo seguro, eficiente y académico.</p>
                    
                    <h3>3. Responsabilidad del Usuario</h3>
                    <p>Eres totalmente responsable del contenido que cargas, compartes o publicas en la Plataforma. Esto incluye, sin limitarse a, texto, imágenes, documentos, enlaces y cualquier otro material ("Contenido del Usuario").</p>
                    
                    <p><strong>Queda estrictamente prohibido cargar o distribuir contenido que:</strong></p>
                    <ul>
                        <li>Sea pornográfico, sexualmente explícito o inapropiado</li>
                        <li>Infrinja derechos de autor, marcas registradas o propiedad intelectual de terceros</li>
                        <li>Contenga discurso de odio, violencia extrema, difamación o amenazas</li>
                        <li>Promueva actividades ilegales o prohibidas (como drogas, hacking, acoso, terrorismo, odio)</li>
                        <li>Contenga información personal sensible de terceros sin su consentimiento (p. ej., datos médicos, financieros, identificación)</li>
                        <li>Constituya fraude, phishing, malware o enlaces maliciosos</li>
                    </ul>
                    
                    <h3>4. Moderación, Reportes y Sanciones</h3>
                    <p>StudyHub.live se reserva el derecho de revisar, moderar, editar, rechazar o eliminar cualquier Contenido del Usuario que viole estos Términos, sin previo aviso.</p>
                    <ul>
                        <li>Los usuarios pueden reportar contenido inapropiado o violaciones de estas normas a través de los mecanismos habilitados</li>
                        <li>En casos de violación confirmada, la Plataforma podrá suspender temporal o permanentemente la cuenta infractora, sin derecho a reembolso ni compensación</li>
                        <li>StudyHub.live se reserva el derecho de banear automáticamente cuentas con múltiples reportes o infracciones graves</li>
                    </ul>
                    
                    <h3>5. Privacidad y Protección de Datos</h3>
                    <p>Respetamos tu privacidad. Todos los datos personales que proporciones serán tratados según nuestra Política de Privacidad.</p>
                    <ul>
                        <li>No compartiremos, venderemos ni transferiremos tu información personal a terceros sin tu consentimiento, salvo obligación legal</li>
                        <li>Utilizamos prácticas de seguridad estándar para proteger tus datos, aunque no podemos garantizar su seguridad total frente a actividades ilícitas de terceros</li>
                    </ul>
                    
                    <h3>6. Derechos de Propiedad Intelectual</h3>
                    <p>Al cargar o compartir contenido en la Plataforma:</p>
                    <ul>
                        <li>Confirmas que posees los derechos necesarios o tienes permiso del titular para hacerlo</li>
                        <li>Concedes a StudyHub.live una licencia no exclusiva, global, gratuita y sublicenciable para usar, reproducir, distribuir y mostrar tu contenido dentro de la plataforma, únicamente para los fines de operación del servicio</li>
                    </ul>
                    
                    <h3>7. Limitación de Responsabilidad</h3>
                    <p>StudyHub.live actúa como mero intermediario tecnológico. No asumimos responsabilidad por el Contenido del Usuario ni por el uso que otros usuarios hagan del mismo.</p>
                    <p>En ningún caso StudyHub.live será responsable por daños directos, indirectos, incidentales, especiales o consecuenciales que puedan derivarse del uso de la plataforma, incluso si fuimos advertidos de la posibilidad de dichos daños.</p>
                    
                    <h3>8. Modificaciones</h3>
                    <p>Nos reservamos el derecho de modificar, actualizar o adaptar estos Términos o cualquier parte del sitio, incluyendo funcionalidades o políticas.</p>
                    <p>Las actualizaciones se notificarán a través de la Plataforma o por correo electrónico. Si continúas usando el servicio tras los cambios, se considerará que aceptas las nuevas condiciones.</p>
                    
                    <h3>9. Terminación del Servicio</h3>
                    <ul>
                        <li>Puedes dar de baja tu cuenta en cualquier momento accediendo a la configuración de tu perfil</li>
                        <li>StudyHub.live también puede dar por terminada tu cuenta en caso de violaciones reiteradas o graves a estos Términos, sin aviso previo ni compensación</li>
                    </ul>
                    
                    <h3>10. Legislación Aplicable y Jurisdicción</h3>
                    <p>Estos Términos se rigen por las leyes del país donde StudyHub.live tiene su sede legal.</p>
                    <p>Para cualquier disputa derivada o relacionada con estos Términos, ambas partes se someten a la jurisdicción exclusiva de los tribunales de dicha jurisdicción.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="acceptTermsFromModal()">
                    <i class="fas fa-check"></i>
                    Aceptar y Cerrar
                </button>
                <button class="btn btn-outline" onclick="closeTermsModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Políticas de Privacidad -->
    <div id="privacy-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Políticas de Privacidad - StudyHub.live</h2>
                <button class="modal-close" onclick="closePrivacyModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="privacy-content">
                    <h3>1. Introducción</h3>
                    <p>En StudyHub.live nos tomamos muy en serio tu privacidad y la protección de tus datos personales. Esta Política de Privacidad explica qué información recopilamos, cómo la utilizamos, con quién la compartimos y qué derechos tienes como usuario de nuestra plataforma.</p>
                    <p>Al registrarte o usar nuestros servicios, aceptas el tratamiento de tus datos conforme a esta Política.</p>
                    
                    <h3>2. Información que Recopilamos</h3>
                    <p>Cuando usas StudyHub.live, podemos recopilar la siguiente información:</p>
                    
                    <p><strong>Datos de registro</strong></p>
                    <ul>
                        <li>Nombre completo</li>
                        <li>Correo electrónico</li>
                        <li>Contraseña (cifrada)</li>
                        <li>Información básica de perfil (opcional: foto, institución, rol académico)</li>
                    </ul>
                    
                    <p><strong>Datos de uso</strong></p>
                    <ul>
                        <li>Contenido que subes (notas, tareas, comentarios, documentos, etc.)</li>
                        <li>Historial de navegación dentro de la plataforma</li>
                        <li>Interacciones con otros usuarios (mensajes, colaboraciones)</li>
                    </ul>
                    
                    <p><strong>Datos técnicos</strong></p>
                    <ul>
                        <li>Dirección IP</li>
                        <li>Tipo de navegador y dispositivo</li>
                        <li>Cookies y tecnologías similares (ver Sección 9)</li>
                    </ul>
                    
                    <h3>3. Uso de la Información</h3>
                    <p>Utilizamos los datos recopilados con los siguientes fines:</p>
                    <ul>
                        <li>Garantizar el correcto funcionamiento de la plataforma</li>
                        <li>Personalizar la experiencia de usuario</li>
                        <li>Facilitar la colaboración y gestión académica</li>
                        <li>Prevenir fraudes, abusos o mal uso del servicio</li>
                        <li>Dar cumplimiento a obligaciones legales</li>
                        <li>Mejorar nuestras funcionalidades y seguridad</li>
                    </ul>
                    <p>Nunca utilizaremos tus datos con fines distintos a los descritos en esta Política.</p>
                    
                    <h3>4. Responsabilidad sobre el Contenido</h3>
                    <ul>
                        <li>Todo el contenido que subas es de tu exclusiva responsabilidad</li>
                        <li>Queda prohibido cargar material que sea ilegal, pornográfico, violento, difamatorio, de odio o que infrinja derechos de terceros</li>
                        <li>StudyHub.live no se hace responsable del contenido publicado por los usuarios. No obstante, podemos eliminarlo o bloquearlo si viola nuestras normas</li>
                    </ul>
                    
                    <h3>5. Compartición de Datos</h3>
                    <p>No vendemos, alquilamos ni comercializamos tu información personal con terceros. Solo podremos compartir datos en los siguientes casos:</p>
                    <ul>
                        <li><strong>Cumplimiento legal:</strong> cuando la ley o una autoridad competente lo requiera</li>
                        <li><strong>Seguridad:</strong> para prevenir fraudes, ataques o mal uso de la plataforma</li>
                        <li><strong>Servicios técnicos:</strong> con proveedores que nos ayudan en hosting, almacenamiento o mantenimiento, quienes están obligados a mantener la confidencialidad de la información</li>
                    </ul>
                    
                    <h3>6. Protección de la Información</h3>
                    <p>Adoptamos medidas de seguridad técnicas, administrativas y organizativas para proteger tu información, incluyendo:</p>
                    <ul>
                        <li>Encriptación de contraseñas</li>
                        <li>Accesos restringidos a bases de datos</li>
                        <li>Monitoreo constante de actividad sospechosa</li>
                    </ul>
                    <p>Aunque aplicamos estándares de seguridad, ningún sistema es 100% infalible, por lo que no podemos garantizar absoluta protección frente a ataques externos.</p>
                    
                    <h3>7. Derechos del Usuario</h3>
                    <p>Tienes derecho a:</p>
                    <ul>
                        <li>Acceder a tus datos personales</li>
                        <li>Rectificar información incorrecta o desactualizada</li>
                        <li>Solicitar la eliminación de tu cuenta y datos</li>
                        <li>Limitar u oponerte a determinados tratamientos</li>
                        <li>Solicitar la portabilidad de tus datos (cuando aplique)</li>
                    </ul>
                    <p>Para ejercer estos derechos, contáctanos a través de nuestros canales oficiales de soporte.</p>
                    
                    <h3>8. Retención de Datos</h3>
                    <p>Conservamos tus datos solo el tiempo necesario para cumplir con los fines descritos en esta Política. Una vez elimines tu cuenta, borraremos o anonimizaremos tu información, salvo cuando la ley requiera su conservación por más tiempo.</p>
                    
                    <h3>9. Cookies y Tecnologías Similares</h3>
                    <p>Utilizamos cookies para mejorar tu experiencia, recordar tus preferencias y analizar el uso de la plataforma. Puedes desactivar las cookies en tu navegador, aunque algunas funciones podrían verse limitadas.</p>
                    
                    <h3>10. Uso por Menores</h3>
                    <p>StudyHub.live está destinada a mayores de 13 años. Si descubrimos que un menor de esa edad ha creado una cuenta sin autorización de sus padres o tutores, eliminaremos la cuenta de inmediato.</p>
                    
                    <h3>11. Modificaciones</h3>
                    <p>Podemos actualizar esta Política de Privacidad en cualquier momento. Notificaremos los cambios relevantes a través del sitio web o correo electrónico. Si continúas usando la plataforma tras dichos cambios, se entenderá que los aceptas.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="acceptPrivacyFromModal()">
                    <i class="fas fa-check"></i>
                    Entendido
                </button>
                <button class="btn btn-outline" onclick="closePrivacyModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

</body>
</html>
