<!DOCTYPE html>    <!-- CSS personalizado modular -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/subjects.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/tasks.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="css/chatbot-demos.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>StudyHub - Gesti칩n Acad칠mica</title>
    
    <!-- Fuentes de Google -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- FullCalendar CSS -->
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
    
    <!-- CSS personalizado modular -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/subjects.css">
    <link rel="stylesheet" href="css/tasks.css">
    <link rel="stylesheet" href="css/profile.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/mobile-optimizations.css">
    <link rel="stylesheet" href="css/chatbot.css">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-spinner"></div>
        <p>Cargando StudyHub...</p>
    </div>

    <!-- Modal de login/registro -->
    <div id="auth-modal" class="modal active">
        <div class="modal-content">
            <div class="auth-container">
                <!-- Lado izquierdo - Logo y branding -->
                <div class="auth-left">
                    <img src="img/LOGO STUDI.png" alt="StudyHub Logo" class="logo">
                    <h1>StudyHub</h1>
                    <p>Tu plataforma de gesti칩n acad칠mica colaborativa</p>
                </div>

                <!-- Lado derecho - Formularios -->
                <div class="auth-right">
                    <!-- Formulario de Login -->
                    <div id="login-form" class="auth-form active">
                        <h2>Iniciar Sesi칩n</h2>
                        <p class="subtitle">Accede a tu cuenta</p>
                        <form id="loginForm">
                            <div class="form-group">
                                <i class="fas fa-user"></i>
                                <input type="text" id="login-username" placeholder="Usuario o email" required>
                                <small class="form-help">Ingresa tu usuario o email.</small>
                            </div>
                            <div class="form-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="login-password" placeholder="Contrase침a" required>
                            </div>
                            <div class="forgot-password-section">
                                <a href="#" class="forgot-password-link" onclick="showForgotPassword()">
                                    <i class="fas fa-key"></i>
                                    쯆lvidaste tu contrase침a?
                                </a>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-sign-in-alt"></i>
                                <span>Iniciar Sesi칩n</span>
                                <div class="loading-spinner" style="display: none;"></div>
                            </button>
                        </form>
                        <p class="auth-info">
                            <i class="fas fa-users"></i>
                            StudyHub: Colabora en asignaturas con tus compa침eros. Crea asignaturas e invita a quien quieras.
                        </p>
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline btn-register" onclick="showRegister()">
                                <i class="fas fa-user-plus"></i>
                                쯅o tienes cuenta? Crear cuenta gratis
                            </button>
                        </div>
                    </div>

                    <!-- Formulario de Recuperar Contrase침a -->
                    <div id="forgot-password-form" class="auth-form">
                        <h2>Recuperar Contrase침a</h2>
                        <p class="subtitle">Te enviaremos un enlace para restablecer tu contrase침a</p>
                        <div class="forgot-notice">
                            <i class="fas fa-shield-alt"></i>
                            <p>Ingresa tu email y te enviaremos las instrucciones</p>
                        </div>
                        
                        <form id="forgotPasswordForm">
                            <div class="form-group">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="forgot-email" placeholder="Correo electr칩nico" required>
                                <small class="form-help">Ingresa el email asociado a tu cuenta</small>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i>
                                <span>Enviar Enlace de Recuperaci칩n</span>
                                <div class="loading-spinner" style="display: none;"></div>
                            </button>
                        </form>
                        
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline" onclick="showLogin()">
                                <i class="fas fa-arrow-left"></i>
                                Volver al Login
                            </button>
                            <button type="button" class="btn btn-outline btn-register" onclick="showRegister()">
                                <i class="fas fa-user-plus"></i>
                                쯅o tienes cuenta? Crear cuenta
                            </button>
                        </div>
                    </div>

                    <!-- Formulario de Registro -->
                    <div id="register-form" class="auth-form">
                        <h2>Crear Cuenta</h2>
                        <p class="subtitle">칔nete a StudyHub</p>
                        <div class="register-notice">
                            <i class="fas fa-users"></i>
                            <p>Registro libre - Colabora por asignaturas</p>
                        </div>
                        
                        <!-- Paso 1: Informaci칩n Personal -->
                        <div id="register-step-1" class="register-step active">
                            <div class="step-indicator">
                                <span class="step active">1</span>
                                <span class="step-divider"></span>
                                <span class="step">2</span>
                            </div>
                            <h3>Informaci칩n Personal</h3>
                            <form id="registerStepOneForm">
                                <div class="form-group">
                                    <i class="fas fa-user"></i>
                                    <input type="text" id="register-name" placeholder="Nombre completo" required>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-envelope"></i>
                                    <input type="email" id="register-email" placeholder="Correo electr칩nico" required>
                                    <small class="form-help">Para confirmaci칩n y notificaciones</small>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-graduation-cap"></i>
                                    <input type="text" id="register-career" placeholder="Carrera" required>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-calendar"></i>
                                    <input type="text" id="register-semester" placeholder="Semestre" required>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-arrow-right"></i>
                                    <span>Continuar</span>
                                </button>
                            </form>
                        </div>
                        
                        <!-- Paso 2: Crear Contrase침a -->
                        <div id="register-step-2" class="register-step">
                            <div class="step-indicator">
                                <span class="step completed">1</span>
                                <span class="step-divider completed"></span>
                                <span class="step active">2</span>
                            </div>
                            <h3>Crear Contrase침a</h3>
                            <form id="registerStepTwoForm">
                                <div class="form-group">
                                    <i class="fas fa-lock"></i>
                                    <div class="password-input-container">
                                        <input type="password" id="register-password" placeholder="Contrase침a" required>
                                        <button type="button" class="password-toggle" id="password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength" id="password-strength">
                                        <div class="strength-meter">
                                            <div class="strength-bar" id="strength-bar"></div>
                                        </div>
                                        <span class="strength-text" id="strength-text">Ingresa una contrase침a</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <i class="fas fa-lock"></i>
                                    <div class="password-input-container">
                                        <input type="password" id="register-confirm-password" placeholder="Confirmar contrase침a" required>
                                        <button type="button" class="password-toggle" id="confirm-password-toggle">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-match" id="password-match"></div>
                                </div>
                                
                                <!-- T칠rminos y Condiciones -->
                                <div class="terms-section">
                                    <div class="checkbox-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="terms-checkbox" required>
                                            <span class="checkmark"></span>
                                            <span class="checkbox-text">
                                                He le칤do y acepto los 
                                                <a href="#" class="terms-link" onclick="openTermsModal()">T칠rminos y Condiciones</a>
                                                y las 
                                                <a href="#" class="privacy-link" onclick="openPrivacyModal()">Pol칤ticas de Privacidad</a>
                                                de StudyHub.live
                                            </span>
                                        </label>
                                    </div>
                                    <div class="terms-error" id="terms-error" style="display: none;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        Debes aceptar los t칠rminos y condiciones para crear tu cuenta
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" id="back-to-step-1">
                                        <i class="fas fa-arrow-left"></i>
                                        Atr치s
                                    </button>
                                    <button type="submit" class="btn btn-primary" id="create-account-btn" disabled>
                                        <i class="fas fa-user-plus"></i>
                                        <span>Crear Cuenta</span>
                                        <div class="loading-spinner" style="display: none;"></div>
                                    </button>
                                </div>
                            </form>
                            <small class="form-help">Despu칠s podr치s personalizar tu perfil y crear asignaturas.</small>
                        </div>
                        
                        <div class="auth-actions">
                            <button type="button" class="btn btn-outline btn-login" onclick="showLogin()">
                                <i class="fas fa-sign-in-alt"></i>
                                쯏a tienes cuenta? Inicia sesi칩n
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplicaci칩n principal -->
    <div id="app" class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <img src="img/LOGO STUDI.png" alt="StudyHub Logo" class="sidebar-logo">
                <h3>StudyHub</h3>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li>
                        <a href="#" data-section="dashboard" class="nav-link active">
                            <i class="fas fa-home"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="calendar" class="nav-link">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Calendario</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="subjects" class="nav-link">
                            <i class="fas fa-book"></i>
                            <span>Asignaturas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="notes" class="nav-link">
                            <i class="fas fa-sticky-note"></i>
                            <span>Notas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="tasks" class="nav-link">
                            <i class="fas fa-tasks"></i>
                            <span>Tareas</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" data-section="profile" class="nav-link">
                            <i class="fas fa-user"></i>
                            <span>Perfil</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar-container">
                        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="16" cy="16" r="16" fill="#667eea"/>
                            <circle cx="16" cy="12" r="5" fill="white"/>
                            <path d="M6 26c0-5.5 4.5-10 10-10s10 4.5 10 10" fill="white"/>
                        </svg>
                    </div>
                    <div class="user-details">
                        <span class="user-name" id="user-name">Usuario</span>
                        <span class="user-email" id="user-email">email@ejemplo.com</span>
                    </div>
                </div>
                <button class="btn btn-outline logout-btn" id="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesi칩n</span>
                </button>
            </div>
        </aside>

        <!-- Contenido principal -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">Dashboard</h1>
                </div>
                <div class="header-right">
                    <div class="theme-toggle">
                        <button id="theme-toggle" class="btn btn-outline">
                            <i class="fas fa-moon"></i>
                        </button>
                    </div>
                    <div class="notifications">
                        <button class="btn btn-outline" id="notifications-btn">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notification-badge">0</span>
                        </button>
                    </div>
                    <!-- Bot칩n global para usar c칩digo (visible en toda la app) -->
                    <button id="use-access-code-topbtn" class="btn btn-primary" type="button"
                            onclick="document.getElementById('access-code-modal').classList.add('active'); setTimeout(()=>{ const i = document.getElementById('access-code-input'); if(i) i.focus(); },100);">
                        <i class="fas fa-key"></i>
                        游댐 USAR C칍DIGO
                    </button>
                </div>
            </header>

            <!-- Contenido de las secciones -->
            <div class="content">
                <!-- Dashboard -->
                <section id="dashboard-section" class="content-section active">
                    <!-- SVG Definitions for Gradients -->
                    <svg class="dashboard-svg-defs">
                        <defs>
                            <linearGradient id="gradient-primary" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-success" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-warning" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#43e97b;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#38f9d7;stop-opacity:1" />
                            </linearGradient>
                            <linearGradient id="gradient-danger" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                    </svg>

                    <div class="dashboard-container">
                        <div class="dashboard-content">
                            <div class="dashboard-grid">
                                <!-- Estad칤sticas Generales -->
                                <div class="dashboard-grid-item stats-overview animate-fadeInUp">
                                    <div class="card-header-modern">
                                        <div class="card-title-modern">
                                            <div class="card-title-icon">
                                                <i class="fas fa-chart-line"></i>
                                            </div>
                                            Resumen General
                                        </div>
                                        <div class="card-actions-modern">
                                            <button class="btn-modern btn-ghost btn-icon tooltip-modern" data-tooltip="Actualizar estad칤sticas" id="refresh-stats-btn">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="stats-container">
                                        <div class="stat-card hover-shadow-lift" data-section="subjects">
                                            <div class="stat-card-header">
                                                <div class="stat-icon subjects">
                                                    <i class="fas fa-book"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="total-subjects">0</div>
                                            <div class="stat-label">Asignaturas</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-up"></i>
                                                </div>
                                                <span>+2 esta semana</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="tasks">
                                            <div class="stat-card-header">
                                                <div class="stat-icon tasks">
                                                    <i class="fas fa-tasks"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="pending-tasks">0</div>
                                            <div class="stat-label">Tareas Pendientes</div>
                                            <div class="stat-change negative">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-down"></i>
                                                </div>
                                                <span>-3 desde ayer</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="notes">
                                            <div class="stat-card-header">
                                                <div class="stat-icon notes">
                                                    <i class="fas fa-sticky-note"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="total-notes">0</div>
                                            <div class="stat-label">Notas Guardadas</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-arrow-up"></i>
                                                </div>
                                                <span>+5 hoy</span>
                                            </div>
                                        </div>

                                        <div class="stat-card hover-shadow-lift" data-section="calendar">
                                            <div class="stat-card-header">
                                                <div class="stat-icon events">
                                                    <i class="fas fa-calendar-check"></i>
                                                </div>
                                                <div class="stat-menu">
                                                    <button class="stat-menu-btn">
                                                        <i class="fas fa-ellipsis-h"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="stat-number" id="upcoming-events">0</div>
                                            <div class="stat-label">Eventos Pr칩ximos</div>
                                            <div class="stat-change positive">
                                                <div class="stat-change-icon">
                                                    <i class="fas fa-calendar-plus"></i>
                                                </div>
                                                <span>Esta semana</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Acciones R치pidas -->
                                <div class="dashboard-grid-item quick-actions animate-fadeInUp animate-delay-100">
                                    <div class="quick-actions-container">
                                        <div class="quick-actions-header">
                                            <h3 class="quick-actions-title">Acciones R치pidas</h3>
                                        </div>
                                        <div class="quick-actions-grid">
                                            <div class="quick-action-card" data-action="new-subject">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-book-open"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Asignatura</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-event">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-calendar-plus"></i>
                                                </div>
                                                <span class="quick-action-label">Nuevo Evento</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-note">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-sticky-note"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Nota</span>
                                            </div>
                                            <div class="quick-action-card" data-action="new-task">
                                                <div class="quick-action-icon">
                                                    <i class="fas fa-plus-circle"></i>
                                                </div>
                                                <span class="quick-action-label">Nueva Tarea</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actividad Reciente -->
                                <div class="dashboard-grid-item recent-activity animate-fadeInUp animate-delay-200">
                                    <div class="activity-container">
                                        <div class="activity-header">
                                            <h3 class="activity-title">Actividad Reciente</h3>
                                            <button class="btn-modern btn-ghost btn-icon" id="refresh-activity-btn">
                                                <i class="fas fa-sync-alt"></i>
                                            </button>
                                        </div>
                                        <div class="activity-list" id="recent-activity">
                                            <!-- Se llena din치micamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Tareas Pr칩ximas -->
                                <div class="dashboard-grid-item upcoming-tasks animate-fadeInUp animate-delay-300">
                                    <div class="tasks-container">
                                        <div class="tasks-header">
                                            <h3 class="tasks-title">Pr칩ximas Tareas</h3>
                                            <button class="btn-modern btn-primary btn-sm" id="add-quick-task-btn">
                                                <i class="fas fa-plus"></i>
                                                Nueva
                                            </button>
                                        </div>
                                        <div class="tasks-list" id="upcoming-tasks-list">
                                            <!-- Se llena din치micamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>

                                <!-- Progreso de Tareas -->
                                <div class="dashboard-grid-item progress-overview animate-fadeInUp animate-delay-100">
                                    <div class="card-header-modern">
                                        <div class="card-title-modern">
                                            <div class="card-title-icon">
                                                <i class="fas fa-chart-pie"></i>
                                            </div>
                                            Progreso de Tareas
                                        </div>
                                    </div>
                                    <div class="progress-container">
                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill pending" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-pending-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-pending-percentage">0%</div>
                                                    <div class="progress-count" id="progress-pending-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">Pendientes</div>
                                        </div>

                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill in-progress" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-in-progress-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-in-progress-percentage">0%</div>
                                                    <div class="progress-count" id="progress-in-progress-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">En Progreso</div>
                                        </div>

                                        <div class="progress-item">
                                            <div class="progress-circle">
                                                <svg viewBox="0 0 42 42">
                                                    <circle class="progress-circle-bg" cx="21" cy="21" r="15.915"></circle>
                                                    <circle class="progress-circle-fill completed" cx="21" cy="21" r="15.915" 
                                                            stroke-dasharray="0 100" id="progress-completed-circle"></circle>
                                                </svg>
                                                <div class="progress-text">
                                                    <div class="progress-percentage" id="progress-completed-percentage">0%</div>
                                                    <div class="progress-count" id="progress-completed-count">0</div>
                                                </div>
                                            </div>
                                            <div class="progress-label">Completadas</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Mini Calendario -->
                                <div class="dashboard-grid-item calendar-preview animate-fadeInUp animate-delay-200">
                                    <div class="calendar-preview-container">
                                        <div class="card-header-modern">
                                            <div class="card-title-modern">
                                                <div class="card-title-icon">
                                                    <i class="fas fa-calendar-alt"></i>
                                                </div>
                                                Calendario
                                            </div>
                                            <button class="btn-modern btn-outline btn-sm" data-section="calendar">
                                                Ver todo
                                            </button>
                                        </div>
                                        <div class="calendar-mini">
                                            <div class="calendar-header">
                                                <button class="calendar-nav-btn" id="prev-month">
                                                    <i class="fas fa-chevron-left"></i>
                                                </button>
                                                <div class="calendar-month" id="current-month">Agosto 2025</div>
                                                <button class="calendar-nav-btn" id="next-month">
                                                    <i class="fas fa-chevron-right"></i>
                                                </button>
                                            </div>
                                            <div class="calendar-grid" id="mini-calendar-grid">
                                                <!-- Se genera din치micamente -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Centro de Notificaciones -->
                                <div class="dashboard-grid-item notifications-center animate-fadeInUp animate-delay-300">
                                    <div class="notifications-container">
                                        <div class="card-header-modern">
                                            <div class="card-title-modern">
                                                <div class="card-title-icon">
                                                    <i class="fas fa-bell"></i>
                                                </div>
                                                Notificaciones
                                            </div>
                                        </div>
                                        <div class="card-body-modern" id="notifications-container">
                                            <!-- Se llena din치micamente desde la base de datos -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Calendario -->
                <section id="calendar-section" class="content-section">
                    <div class="section-header">
                        <h2>Calendario Profesional</h2>
                        <button class="btn btn-primary" id="add-event-btn">
                            <i class="fas fa-plus"></i>
                            Nuevo Evento
                        </button>
                    </div>
                    
                    <div class="calendar-container">
                        <div class="calendar-content">
                            <div id="calendar"></div>
                        </div>
                    </div>
                </section>

                <!-- Asignaturas -->
                <section id="subjects-section" class="content-section">
                    <div class="section-header">
                        <h2>Asignaturas</h2>
                        <div class="header-actions">
                            <button class="btn btn-outline" id="use-access-code-btn">
                                <i class="fas fa-key"></i>
                                Usar C칩digo
                            </button>
                            <button class="btn btn-primary" id="add-subject-btn">
                                <i class="fas fa-plus"></i>
                                Nueva Asignatura
                            </button>
                        </div>
                    </div>
                    <div class="subjects-grid" id="subjects-grid">
                        <!-- Se llena din치micamente -->
                    </div>
                </section>

                <!-- Notas -->
                <section id="notes-section" class="content-section">
                    <div class="section-header">
                        <h2>Notas</h2>
                        <div class="notes-actions">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="notes-search" placeholder="Buscar notas...">
                            </div>
                            <button class="btn btn-primary" id="add-note-btn">
                                <i class="fas fa-plus"></i>
                                Nueva Nota
                            </button>
                        </div>
                    </div>
                    <div class="notes-grid" id="notes-grid">
                        <!-- Se llena din치micamente -->
                    </div>
                </section>

                <!-- Tareas -->
                <section id="tasks-section" class="content-section">
                    <!-- Header profesional de tareas -->
                    <div class="tasks-header">
                        <div class="tasks-header-content">
                            <div class="tasks-title">
                                <i class="fas fa-tasks"></i>
                                <h2>Gesti칩n de Tareas</h2>
                            </div>
                            <div class="tasks-stats">
                                <div class="task-stat-pill">
                                    <i class="fas fa-list-check"></i>
                                    <span id="total-tasks-count">0</span> Total
                                </div>
                                <div class="task-stat-pill">
                                    <i class="fas fa-clock"></i>
                                    <span id="pending-tasks-count">0</span> Pendientes
                                </div>
                                <div class="task-stat-pill">
                                    <i class="fas fa-check-circle"></i>
                                    <span id="completed-tasks-count">0</span> Completadas
                                </div>
                            </div>
                            <div class="view-toggle">
                                <button class="view-toggle-btn active" data-view="list">
                                    <i class="fas fa-list"></i>
                                    Lista
                                </button>
                                <button class="view-toggle-btn" data-view="grid">
                                    <i class="fas fa-th-large"></i>
                                    Tarjetas
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Controles superiores -->
                    <div class="section-controls">
                        <div class="tasks-filters">
                            <button class="filter-btn active" data-filter="all">
                                <i class="fas fa-list"></i>
                                Todas
                            </button>
                            <button class="filter-btn" data-filter="pending">
                                <i class="fas fa-clock"></i>
                                Pendientes
                            </button>
                            <button class="filter-btn" data-filter="in-progress">
                                <i class="fas fa-spinner"></i>
                                En Progreso
                            </button>
                            <button class="filter-btn" data-filter="completed">
                                <i class="fas fa-check-circle"></i>
                                Completadas
                            </button>
                        </div>
                        <button class="btn btn-primary" id="add-task-btn">
                            <i class="fas fa-plus"></i>
                            Nueva Tarea
                        </button>
                    </div>

                    <!-- Contenedor de tareas -->
                    <div class="tasks-container">
                        <div class="tasks-list" id="tasks-list">
                            <!-- Se llena din치micamente -->
                        </div>
                    </div>
                </section>

                <!-- Perfil -->
                <section id="profile-section" class="content-section">
                    <!-- Header profesional del perfil -->
                    <div class="profile-header-modern">
                        <div class="profile-title">
                            <i class="fas fa-user-circle"></i>
                            <h2>Perfil de Usuario</h2>
                        </div>
                        <div class="profile-subtitle">
                            <p>Gestiona tu informaci칩n personal y preferencias de cuenta</p>
                        </div>
                    </div>
                    
                    <div class="profile-container">
                        <div class="card profile-card">
                            <div class="profile-header">
                                <div class="profile-avatar-modern">
                                    <div class="avatar-container-modern">
                                        <div class="avatar-image-modern" id="profile-avatar">
                                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <circle cx="40" cy="40" r="40" fill="#667eea"/>
                                                <circle cx="40" cy="30" r="12" fill="white"/>
                                                <path d="M15 65c0-13.8 11.2-25 25-25s25 11.2 25 25" fill="white"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <button class="avatar-upload-btn" id="avatar-upload-btn">
                                        <i class="fas fa-camera"></i>
                                    </button>
                                    <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
                                </div>
                                <div class="profile-info">
                                    <h3 id="profile-name">Nombre del Usuario</h3>
                                    <p id="profile-email">
                                        <i class="fas fa-envelope"></i>
                                        email@ejemplo.com
                                    </p>
                                    <span class="profile-role member" id="profile-role">
                                        <i class="fas fa-user"></i>
                                        Miembro
                                    </span>
                                </div>
                            </div>
                            
                            <form id="profile-form" class="profile-form">
                                <div class="form-group">
                                    <label for="profile-name-input">
                                        <i class="fas fa-user"></i>
                                        Nombre completo
                                    </label>
                                    <input type="text" id="profile-name-input" placeholder="Ingresa tu nombre completo" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-career-input">
                                        <i class="fas fa-graduation-cap"></i>
                                        Carrera
                                    </label>
                                    <input type="text" id="profile-career-input" placeholder="Ej: Ingenier칤a en Sistemas" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-semester-input">
                                        <i class="fas fa-calendar-alt"></i>
                                        Semestre
                                    </label>
                                    <input type="text" id="profile-semester-input" placeholder="Ej: 5to Semestre" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="profile-username-input">
                                        <i class="fas fa-at"></i>
                                        Usuario
                                    </label>
                                    <div class="username-group">
                                        <input type="text" id="profile-username-input" placeholder="Define tu username 칰nico">
                                        <button type="button" class="btn btn-outline" id="activate-username-profile-btn">
                                            <i class="fas fa-user-check"></i>
                                            Activar Username
                                        </button>
                                    </div>
                                    <small class="form-help" id="profile-username-help">
                                        <i class="fas fa-info-circle"></i>
                                        Debe tener 3-50 caracteres: letras, n칰meros o gui칩n bajo (_)
                                    </small>
                                </div>
                                
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i>
                                    Guardar Cambios
                                </button>
                            </form>
                        </div>
                        
                        <!-- Secci칩n de Seguridad -->
                        <div class="card security-card">
                            <div class="card-header">
                                <h3>
                                    <i class="fas fa-shield-alt"></i>
                                    Seguridad de la Cuenta
                                </h3>
                                <p>Gestiona la seguridad de tu cuenta</p>
                            </div>
                            
                            <!-- Cambiar Contrase침a -->
                            <div class="security-section">
                                <h4>
                                    <i class="fas fa-key"></i>
                                    Cambiar Contrase침a
                                </h4>
                                <p class="section-description">Actualiza tu contrase침a para mantener tu cuenta segura</p>
                                
                                <form id="change-password-form" class="change-password-form">
                                    <div class="form-group">
                                        <label for="current-password">
                                            <i class="fas fa-lock"></i>
                                            Contrase침a Actual
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="current-password" placeholder="Ingresa tu contrase침a actual" required>
                                            <button type="button" class="password-toggle" data-target="current-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="new-password">
                                            <i class="fas fa-key"></i>
                                            Nueva Contrase침a
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="new-password" placeholder="Ingresa tu nueva contrase침a" required>
                                            <button type="button" class="password-toggle" data-target="new-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-strength" id="new-password-strength">
                                            <div class="strength-meter">
                                                <div class="strength-bar" id="new-password-strength-bar"></div>
                                            </div>
                                            <span class="strength-text" id="new-password-strength-text">Ingresa una nueva contrase침a</span>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="confirm-new-password">
                                            <i class="fas fa-check-double"></i>
                                            Confirmar Nueva Contrase침a
                                        </label>
                                        <div class="password-input-container">
                                            <input type="password" id="confirm-new-password" placeholder="Confirma tu nueva contrase침a" required>
                                            <button type="button" class="password-toggle" data-target="confirm-new-password">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                        <div class="password-match" id="new-password-match"></div>
                                    </div>
                                    
                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-shield-alt"></i>
                                            <span>Actualizar Contrase침a</span>
                                            <div class="loading-spinner" style="display: none;"></div>
                                        </button>
                                        <button type="button" class="btn btn-outline" id="cancel-password-change">
                                            <i class="fas fa-times"></i>
                                            Cancelar
                                        </button>
                                    </div>
                                </form>
                            </div>
                            
                            <!-- Informaci칩n de Seguridad -->
                            <div class="security-info">
                                <div class="security-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <div>
                                        <strong>Consejo de Seguridad:</strong>
                                        <p>Usa una contrase침a fuerte con al menos 8 caracteres, incluyendo may칰sculas, min칰sculas, n칰meros y s칤mbolos.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Secci칩n de Colaboraci칩n -->
                        <div class="card invite-card">
                            <div class="card-header">
                                <h3>
                                    <i class="fas fa-users"></i>
                                    Colaboraci칩n por Asignaturas
                                </h3>
                                <p>Invita colaboradores espec칤ficos para cada asignatura</p>
                            </div>
                            <div class="card-body">
                                <div class="collaboration-info">
                                    <div class="info-item">
                                        <i class="fas fa-graduation-cap"></i>
                                        <div>
                                            <strong>Asignaturas Propias</strong>
                                            <p>Crea asignaturas e invita a quienes quieras que colaboren contigo</p>
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <i class="fas fa-handshake"></i>
                                        <div>
                                            <strong>Colaboraciones</strong>
                                            <p>칔nete a asignaturas cuando otros te inviten a colaborar</p>
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <i class="fas fa-share-alt"></i>
                                        <div>
                                            <strong>Gestionar Colaboradores</strong>
                                            <p>Desde cada asignatura puedes invitar o gestionar colaboradores</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="collaboration-actions">
                                    <button type="button" class="btn btn-primary" onclick="switchToSection('subjects')">
                                        <i class="fas fa-graduation-cap"></i>
                                        Ver Mis Asignaturas
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <!-- Modal para eventos -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-calendar-alt"></i>
                    <h3 id="event-modal-title">Nuevo Evento</h3>
                </div>
                <button class="modal-close" onclick="closeModal('event-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="event-form">
                    <div class="form-group">
                        <label for="event-title">
                            <i class="fas fa-heading"></i>
                            T칤tulo
                        </label>
                        <input type="text" id="event-title" placeholder="Nombre del evento..." required>
                    </div>
                    <div class="form-group">
                        <label for="event-description">
                            <i class="fas fa-align-left"></i>
                            Descripci칩n
                        </label>
                        <textarea id="event-description" rows="3" placeholder="Describe los detalles del evento..."></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-start-date">
                                <i class="fas fa-clock"></i>
                                Fecha de inicio
                            </label>
                            <input type="datetime-local" id="event-start-date" required>
                        </div>
                        <div class="form-group">
                            <label for="event-end-date">
                                <i class="fas fa-clock"></i>
                                Fecha de fin
                            </label>
                            <input type="datetime-local" id="event-end-date" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="event-type">
                                <i class="fas fa-tag"></i>
                                Tipo
                            </label>
                            <select id="event-type" required>
                                <option value="">Seleccionar tipo...</option>
                                <option value="exam">游닇 Examen</option>
                                <option value="assignment">游늶 Trabajo</option>
                                <option value="class">游꿉 Clase</option>
                                <option value="personal">游녻 Personal</option>
                                <option value="other">游늷 Otro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="event-subject">
                                <i class="fas fa-book"></i>
                                Asignatura
                            </label>
                            <select id="event-subject">
                                <option value="">Sin asignatura espec칤fica</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('event-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="button" id="delete-event-btn" class="btn btn-danger" style="display: none;" onclick="window.calendarManager.deleteCurrentEvent()">
                            <i class="fas fa-trash-alt"></i>
                            Eliminar Evento
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Evento
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para asignaturas -->
    <div id="subject-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-graduation-cap"></i>
                    <h3 id="subject-modal-title">Nueva Asignatura</h3>
                </div>
                <button class="modal-close" onclick="closeModal('subject-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="subject-form">
                    <div class="form-group">
                        <label for="subject-name">
                            <i class="fas fa-book"></i>
                            Nombre de la Asignatura
                        </label>
                        <input type="text" id="subject-name" placeholder="Ej: Matem치ticas Avanzadas" required>
                    </div>
                    <div class="form-group">
                        <label for="subject-professor">
                            <i class="fas fa-user-tie"></i>
                            Profesor
                        </label>
                        <input type="text" id="subject-professor" placeholder="Nombre del profesor" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="subject-schedule">
                                <i class="fas fa-clock"></i>
                                Horario
                            </label>
                            <input type="text" id="subject-schedule" placeholder="Ej: Lunes 8:00-10:00" required>
                        </div>
                        <div class="form-group">
                            <label for="subject-room">
                                <i class="fas fa-door-open"></i>
                                Sal칩n
                            </label>
                            <input type="text" id="subject-room" placeholder="Ej: A-203" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="subject-color">
                            <i class="fas fa-palette"></i>
                            Color Identificativo
                        </label>
                        <input type="color" id="subject-color" value="#3498db">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('subject-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Asignatura
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para notas -->
    <div id="note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-sticky-note"></i>
                    <h3 id="note-modal-title">Nueva Nota</h3>
                </div>
                <button class="modal-close" onclick="closeModal('note-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="note-form">
                    <div class="form-group">
                        <label for="note-title">
                            <i class="fas fa-heading"></i>
                            T칤tulo de la Nota
                        </label>
                        <input type="text" id="note-title" placeholder="T칤tulo descriptivo de tu nota" required>
                    </div>
                    <div class="form-group">
                        <label for="note-content">
                            <i class="fas fa-edit"></i>
                            Contenido
                        </label>
                        <textarea id="note-content" rows="8" placeholder="Escribe el contenido de tu nota aqu칤..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="note-subject">
                            <i class="fas fa-tag"></i>
                            Asignatura
                        </label>
                        <select id="note-subject">
                            <option value="">Sin asignatura</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('note-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i>
                            Guardar Nota
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para tareas -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-tasks"></i>
                    <h3 id="task-modal-title">Nueva Tarea</h3>
                </div>
                <button class="modal-close" onclick="closeModal('task-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="task-form">
                <div class="form-group">
                    <label for="task-title">
                        <i class="fas fa-heading"></i>
                        T칤tulo de la Tarea
                    </label>
                    <input type="text" id="task-title" placeholder="Escribe el t칤tulo de tu tarea..." required>
                </div>
                
                <div class="form-group">
                    <label for="task-description">
                        <i class="fas fa-align-left"></i>
                        Descripci칩n
                    </label>
                    <textarea id="task-description" rows="4" placeholder="Describe los detalles de la tarea..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-due-date">
                            <i class="fas fa-calendar-alt"></i>
                            Fecha l칤mite
                        </label>
                        <input type="datetime-local" id="task-due-date" required>
                    </div>
                    <div class="form-group">
                        <label for="task-priority">
                            <i class="fas fa-exclamation-triangle"></i>
                            Prioridad
                        </label>
                        <select id="task-priority" required>
                            <option value="low">游릭 Baja</option>
                            <option value="medium" selected>游리 Media</option>
                            <option value="high">游댮 Alta</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-subject">
                            <i class="fas fa-book"></i>
                            Asignatura
                        </label>
                        <select id="task-subject">
                            <option value="">游닄 Sin asignatura espec칤fica</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-status">
                            <i class="fas fa-check-circle"></i>
                            Estado
                        </label>
                        <select id="task-status">
                            <option value="pendiente">낍 Pendiente</option>
                            <option value="en_progreso">游댃 En Progreso</option>
                            <option value="terminado">九 Terminado</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline" onclick="closeModal('task-modal')">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Guardar Tarea
                    </button>
                </div>
            </form>
        </div>
    </div>
    <!-- Modal para gestionar colaboradores -->
    <div id="collaborators-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-users"></i>
                    <h3 id="collaborators-modal-title">Gestionar Colaboradores</h3>
                </div>
                <button class="modal-close" onclick="closeCollaboratorsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- Informaci칩n de la asignatura -->
                <div class="subject-info">
                    <h4 id="collab-subject-name">Nombre de la Asignatura</h4>
                    <p id="collab-subject-details">Profesor  Horario</p>
                </div>
                
                <!-- Secci칩n para generar c칩digos de acceso -->
                <div class="invite-section">
                    <h5><i class="fas fa-key"></i> Generar C칩digo de Acceso</h5>
                    <p class="section-description">Crea un c칩digo 칰nico para que otros puedan unirse a esta asignatura</p>
                    
                    <div class="form-group">
                        <label for="access-code-message">Descripci칩n (opcional)</label>
                        <textarea id="access-code-message" rows="2" placeholder="Agrega una descripci칩n del c칩digo..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="access-code-days">Validez del c칩digo</label>
                        <select id="access-code-days">
                            <option value="1">1 d칤a</option>
                            <option value="3">3 d칤as</option>
                            <option value="7" selected>7 d칤as</option>
                            <option value="30">30 d칤as</option>
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary" id="generate-access-code-btn">
                        <i class="fas fa-key"></i>
                        <span>Generar C칩digo</span>
                        <div class="loading-spinner" style="display: none;"></div>
                    </button>
                    
                    <!-- Mostrar c칩digo generado -->
                    <div id="generated-code-section" class="generated-code" style="display: none;">
                        <div class="code-display">
                            <label>C칩digo de Acceso Generado:</label>
                            <div class="code-value">
                                <span id="access-code-value">XXXX-XXXX</span>
                                <button type="button" class="btn btn-sm btn-outline" onclick="copyAccessCode()">
                                    <i class="fas fa-copy"></i>
                                    Copiar
                                </button>
                            </div>
                            <small class="form-help">
                                <i class="fas fa-info-circle"></i>
                                Comparte este c칩digo para que otros puedan unirse a la asignatura
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Lista de colaboradores actuales -->
                <div class="collaborators-section">
                    <h5><i class="fas fa-users"></i> Colaboradores Actuales</h5>
                    <div id="collaborators-list" class="collaborators-list">
                        <!-- Se llena din치micamente -->
                    </div>
                </div>

                <!-- C칩digos de acceso activos -->
                <div class="active-codes-section">
                    <h5><i class="fas fa-key"></i> C칩digos de Acceso Activos</h5>
                    <div id="active-codes-list" class="active-codes-list">
                        <!-- Se llena din치micamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para usar c칩digo de acceso -->
    <div id="access-code-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <div class="modal-title-section">
                    <i class="fas fa-key"></i>
                    <h3>Usar C칩digo de Acceso</h3>
                </div>
                <button class="modal-close" onclick="closeModal('access-code-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p class="modal-description">
                    Ingresa el c칩digo de acceso que te compartieron para unirte a una asignatura.
                </p>
                <form id="use-access-code-form">
                    <div class="form-group">
                        <label for="access-code-input">C칩digo de Acceso</label>
                        <input type="text" id="access-code-input" placeholder="XXXX-XXXX" required maxlength="9" style="text-transform: uppercase;">
                        <small class="form-help">El c칩digo tiene el formato XXXX-XXXX</small>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline" onclick="closeModal('access-code-modal')">
                            <i class="fas fa-times"></i>
                            Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Unirse</span>
                            <div class="loading-spinner" style="display: none;"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para confirmar eliminaci칩n -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3 id="confirm-modal-title">Confirmar Acci칩n</h3>
                <button class="modal-close" onclick="closeModal('confirm-modal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p id="confirm-modal-message">쮼st치s seguro de que quieres realizar esta acci칩n?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline" onclick="closeModal('confirm-modal')">
                    <i class="fas fa-times"></i>
                    Cancelar
                </button>
                <button type="button" id="confirm-modal-action" class="btn btn-danger">
                    <i class="fas fa-check"></i>
                    <span>Confirmar</span>
                    <div class="loading-spinner" style="display: none;"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- FullCalendar JS -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Scripts de la aplicaci칩n -->
    <script src="js/loading-utils.js"></script>
    <script src="js/db.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/subjects.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/main.js"></script>
    <script src="js/chatbot.js"></script>
    
    <!-- Script de configuraci칩n de base de datos de prueba -->
    <script src="db/setup-test-db.js"></script>

    <!-- Inicializar Calendar Manager -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Inicializando Calendar Manager...');
            if (typeof CalendarManager !== 'undefined') {
                window.calendarManager = new CalendarManager();
                console.log('Calendar Manager inicializado correctamente');
            } else {
                console.error('CalendarManager no est치 definido');
            }
            
            // Asegurar que el bot칩n "Usar C칩digo" funcione
            console.log('Verificando bot칩n usar c칩digo...');
            
            function initUseCodeButton() {
                const useCodeBtn = document.getElementById('use-access-code-btn');
                console.log('Bot칩n usar c칩digo encontrado:', useCodeBtn);
                
                if (useCodeBtn) {
                    // Remover listeners anteriores
                    const newBtn = useCodeBtn.cloneNode(true);
                    useCodeBtn.parentNode.replaceChild(newBtn, useCodeBtn);
                    
                    newBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Click en bot칩n usar c칩digo');
                        
                        // Mostrar modal
                        const modal = document.getElementById('access-code-modal');
                        if (modal) {
                            // Limpiar formulario
                            const input = document.getElementById('access-code-input');
                            if (input) input.value = '';
                            
                            // Mostrar modal
                            modal.classList.add('active');
                            
                            // Focus en el input
                            setTimeout(() => {
                                if (input) input.focus();
                            }, 100);
                            
                            console.log('Modal de c칩digo de acceso mostrado');
                        } else {
                            console.error('Modal access-code-modal no encontrado');
                        }
                    });
                    
                    console.log('Event listener agregado al bot칩n usar c칩digo');
                } else {
                    console.log('Bot칩n no encontrado, creando...');
                    createUseCodeButton();
                }
            }
            
            function createUseCodeButton() {
                const headerActions = document.querySelector('.header-actions');
                if (headerActions && !document.getElementById('use-access-code-btn')) {
                    console.log('Creando bot칩n usar c칩digo...');
                    
                    const useCodeBtn = document.createElement('button');
                    useCodeBtn.id = 'use-access-code-btn';
                    useCodeBtn.className = 'btn btn-outline';
                    useCodeBtn.innerHTML = '<i class="fas fa-key"></i> Usar C칩digo';
                    
                    useCodeBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        console.log('Click en bot칩n usar c칩digo (creado)');
                        
                        const modal = document.getElementById('access-code-modal');
                        if (modal) {
                            const input = document.getElementById('access-code-input');
                            if (input) input.value = '';
                            modal.classList.add('active');
                            setTimeout(() => {
                                if (input) input.focus();
                            }, 100);
                        }
                    });
                    
                    // Insertar antes del bot칩n "Nueva Asignatura"
                    const addBtn = document.getElementById('add-subject-btn');
                    if (addBtn) {
                        headerActions.insertBefore(useCodeBtn, addBtn);
                    } else {
                        headerActions.appendChild(useCodeBtn);
                    }
                    
                    console.log('Bot칩n usar c칩digo creado y agregado');
                }
            }
            
            // Intentar inicializar
            setTimeout(initUseCodeButton, 100);
            setTimeout(initUseCodeButton, 500);
            setTimeout(initUseCodeButton, 1000);
        });
    </script>

    <!-- Modal de T칠rminos y Condiciones -->
    <div id="terms-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>T칠rminos y Condiciones - StudyHub.live</h2>
                <button class="modal-close" onclick="closeTermsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="terms-content">
                    <h3>1. Aceptaci칩n de los T칠rminos</h3>
                    <p>Al acceder y utilizar StudyHub.live (en adelante, "la Plataforma"), aceptas cumplir con estos T칠rminos y Condiciones. Si no est치s de acuerdo con alguno de ellos, por favor no utilices nuestra Plataforma.</p>
                    
                    <h3>2. Objeto de la Plataforma</h3>
                    <p>StudyHub.live es una plataforma de gesti칩n acad칠mica colaborativa que permite a los usuarios crear, compartir y colaborar en asignaturas, notas, tareas, eventos y m치s. El prop칩sito es brindar un entorno educativo seguro, eficiente y acad칠mico.</p>
                    
                    <h3>3. Responsabilidad del Usuario</h3>
                    <p>Eres totalmente responsable del contenido que cargas, compartes o publicas en la Plataforma. Esto incluye, sin limitarse a, texto, im치genes, documentos, enlaces y cualquier otro material ("Contenido del Usuario").</p>
                    
                    <p><strong>Queda estrictamente prohibido cargar o distribuir contenido que:</strong></p>
                    <ul>
                        <li>Sea pornogr치fico, sexualmente expl칤cito o inapropiado</li>
                        <li>Infrinja derechos de autor, marcas registradas o propiedad intelectual de terceros</li>
                        <li>Contenga discurso de odio, violencia extrema, difamaci칩n o amenazas</li>
                        <li>Promueva actividades ilegales o prohibidas (como drogas, hacking, acoso, terrorismo, odio)</li>
                        <li>Contenga informaci칩n personal sensible de terceros sin su consentimiento (p. ej., datos m칠dicos, financieros, identificaci칩n)</li>
                        <li>Constituya fraude, phishing, malware o enlaces maliciosos</li>
                    </ul>
                    
                    <h3>4. Moderaci칩n, Reportes y Sanciones</h3>
                    <p>StudyHub.live se reserva el derecho de revisar, moderar, editar, rechazar o eliminar cualquier Contenido del Usuario que viole estos T칠rminos, sin previo aviso.</p>
                    <ul>
                        <li>Los usuarios pueden reportar contenido inapropiado o violaciones de estas normas a trav칠s de los mecanismos habilitados</li>
                        <li>En casos de violaci칩n confirmada, la Plataforma podr치 suspender temporal o permanentemente la cuenta infractora, sin derecho a reembolso ni compensaci칩n</li>
                        <li>StudyHub.live se reserva el derecho de banear autom치ticamente cuentas con m칰ltiples reportes o infracciones graves</li>
                    </ul>
                    
                    <h3>5. Privacidad y Protecci칩n de Datos</h3>
                    <p>Respetamos tu privacidad. Todos los datos personales que proporciones ser치n tratados seg칰n nuestra Pol칤tica de Privacidad.</p>
                    <ul>
                        <li>No compartiremos, venderemos ni transferiremos tu informaci칩n personal a terceros sin tu consentimiento, salvo obligaci칩n legal</li>
                        <li>Utilizamos pr치cticas de seguridad est치ndar para proteger tus datos, aunque no podemos garantizar su seguridad total frente a actividades il칤citas de terceros</li>
                    </ul>
                    
                    <h3>6. Derechos de Propiedad Intelectual</h3>
                    <p>Al cargar o compartir contenido en la Plataforma:</p>
                    <ul>
                        <li>Confirmas que posees los derechos necesarios o tienes permiso del titular para hacerlo</li>
                        <li>Concedes a StudyHub.live una licencia no exclusiva, global, gratuita y sublicenciable para usar, reproducir, distribuir y mostrar tu contenido dentro de la plataforma, 칰nicamente para los fines de operaci칩n del servicio</li>
                    </ul>
                    
                    <h3>7. Limitaci칩n de Responsabilidad</h3>
                    <p>StudyHub.live act칰a como mero intermediario tecnol칩gico. No asumimos responsabilidad por el Contenido del Usuario ni por el uso que otros usuarios hagan del mismo.</p>
                    <p>En ning칰n caso StudyHub.live ser치 responsable por da침os directos, indirectos, incidentales, especiales o consecuenciales que puedan derivarse del uso de la plataforma, incluso si fuimos advertidos de la posibilidad de dichos da침os.</p>
                    
                    <h3>8. Modificaciones</h3>
                    <p>Nos reservamos el derecho de modificar, actualizar o adaptar estos T칠rminos o cualquier parte del sitio, incluyendo funcionalidades o pol칤ticas.</p>
                    <p>Las actualizaciones se notificar치n a trav칠s de la Plataforma o por correo electr칩nico. Si contin칰as usando el servicio tras los cambios, se considerar치 que aceptas las nuevas condiciones.</p>
                    
                    <h3>9. Terminaci칩n del Servicio</h3>
                    <ul>
                        <li>Puedes dar de baja tu cuenta en cualquier momento accediendo a la configuraci칩n de tu perfil</li>
                        <li>StudyHub.live tambi칠n puede dar por terminada tu cuenta en caso de violaciones reiteradas o graves a estos T칠rminos, sin aviso previo ni compensaci칩n</li>
                    </ul>
                    
                    <h3>10. Legislaci칩n Aplicable y Jurisdicci칩n</h3>
                    <p>Estos T칠rminos se rigen por las leyes del pa칤s donde StudyHub.live tiene su sede legal.</p>
                    <p>Para cualquier disputa derivada o relacionada con estos T칠rminos, ambas partes se someten a la jurisdicci칩n exclusiva de los tribunales de dicha jurisdicci칩n.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="acceptTermsFromModal()">
                    <i class="fas fa-check"></i>
                    Aceptar y Cerrar
                </button>
                <button class="btn btn-outline" onclick="closeTermsModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Pol칤ticas de Privacidad -->
    <div id="privacy-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Pol칤ticas de Privacidad - StudyHub.live</h2>
                <button class="modal-close" onclick="closePrivacyModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="privacy-content">
                    <h3>1. Introducci칩n</h3>
                    <p>En StudyHub.live nos tomamos muy en serio tu privacidad y la protecci칩n de tus datos personales. Esta Pol칤tica de Privacidad explica qu칠 informaci칩n recopilamos, c칩mo la utilizamos, con qui칠n la compartimos y qu칠 derechos tienes como usuario de nuestra plataforma.</p>
                    <p>Al registrarte o usar nuestros servicios, aceptas el tratamiento de tus datos conforme a esta Pol칤tica.</p>
                    
                    <h3>2. Informaci칩n que Recopilamos</h3>
                    <p>Cuando usas StudyHub.live, podemos recopilar la siguiente informaci칩n:</p>
                    
                    <p><strong>Datos de registro</strong></p>
                    <ul>
                        <li>Nombre completo</li>
                        <li>Correo electr칩nico</li>
                        <li>Contrase침a (cifrada)</li>
                        <li>Informaci칩n b치sica de perfil (opcional: foto, instituci칩n, rol acad칠mico)</li>
                    </ul>
                    
                    <p><strong>Datos de uso</strong></p>
                    <ul>
                        <li>Contenido que subes (notas, tareas, comentarios, documentos, etc.)</li>
                        <li>Historial de navegaci칩n dentro de la plataforma</li>
                        <li>Interacciones con otros usuarios (mensajes, colaboraciones)</li>
                    </ul>
                    
                    <p><strong>Datos t칠cnicos</strong></p>
                    <ul>
                        <li>Direcci칩n IP</li>
                        <li>Tipo de navegador y dispositivo</li>
                        <li>Cookies y tecnolog칤as similares (ver Secci칩n 9)</li>
                    </ul>
                    
                    <h3>3. Uso de la Informaci칩n</h3>
                    <p>Utilizamos los datos recopilados con los siguientes fines:</p>
                    <ul>
                        <li>Garantizar el correcto funcionamiento de la plataforma</li>
                        <li>Personalizar la experiencia de usuario</li>
                        <li>Facilitar la colaboraci칩n y gesti칩n acad칠mica</li>
                        <li>Prevenir fraudes, abusos o mal uso del servicio</li>
                        <li>Dar cumplimiento a obligaciones legales</li>
                        <li>Mejorar nuestras funcionalidades y seguridad</li>
                    </ul>
                    <p>Nunca utilizaremos tus datos con fines distintos a los descritos en esta Pol칤tica.</p>
                    
                    <h3>4. Responsabilidad sobre el Contenido</h3>
                    <ul>
                        <li>Todo el contenido que subas es de tu exclusiva responsabilidad</li>
                        <li>Queda prohibido cargar material que sea ilegal, pornogr치fico, violento, difamatorio, de odio o que infrinja derechos de terceros</li>
                        <li>StudyHub.live no se hace responsable del contenido publicado por los usuarios. No obstante, podemos eliminarlo o bloquearlo si viola nuestras normas</li>
                    </ul>
                    
                    <h3>5. Compartici칩n de Datos</h3>
                    <p>No vendemos, alquilamos ni comercializamos tu informaci칩n personal con terceros. Solo podremos compartir datos en los siguientes casos:</p>
                    <ul>
                        <li><strong>Cumplimiento legal:</strong> cuando la ley o una autoridad competente lo requiera</li>
                        <li><strong>Seguridad:</strong> para prevenir fraudes, ataques o mal uso de la plataforma</li>
                        <li><strong>Servicios t칠cnicos:</strong> con proveedores que nos ayudan en hosting, almacenamiento o mantenimiento, quienes est치n obligados a mantener la confidencialidad de la informaci칩n</li>
                    </ul>
                    
                    <h3>6. Protecci칩n de la Informaci칩n</h3>
                    <p>Adoptamos medidas de seguridad t칠cnicas, administrativas y organizativas para proteger tu informaci칩n, incluyendo:</p>
                    <ul>
                        <li>Encriptaci칩n de contrase침as</li>
                        <li>Accesos restringidos a bases de datos</li>
                        <li>Monitoreo constante de actividad sospechosa</li>
                    </ul>
                    <p>Aunque aplicamos est치ndares de seguridad, ning칰n sistema es 100% infalible, por lo que no podemos garantizar absoluta protecci칩n frente a ataques externos.</p>
                    
                    <h3>7. Derechos del Usuario</h3>
                    <p>Tienes derecho a:</p>
                    <ul>
                        <li>Acceder a tus datos personales</li>
                        <li>Rectificar informaci칩n incorrecta o desactualizada</li>
                        <li>Solicitar la eliminaci칩n de tu cuenta y datos</li>
                        <li>Limitar u oponerte a determinados tratamientos</li>
                        <li>Solicitar la portabilidad de tus datos (cuando aplique)</li>
                    </ul>
                    <p>Para ejercer estos derechos, cont치ctanos a trav칠s de nuestros canales oficiales de soporte.</p>
                    
                    <h3>8. Retenci칩n de Datos</h3>
                    <p>Conservamos tus datos solo el tiempo necesario para cumplir con los fines descritos en esta Pol칤tica. Una vez elimines tu cuenta, borraremos o anonimizaremos tu informaci칩n, salvo cuando la ley requiera su conservaci칩n por m치s tiempo.</p>
                    
                    <h3>9. Cookies y Tecnolog칤as Similares</h3>
                    <p>Utilizamos cookies para mejorar tu experiencia, recordar tus preferencias y analizar el uso de la plataforma. Puedes desactivar las cookies en tu navegador, aunque algunas funciones podr칤an verse limitadas.</p>
                    
                    <h3>10. Uso por Menores</h3>
                    <p>StudyHub.live est치 destinada a mayores de 13 a침os. Si descubrimos que un menor de esa edad ha creado una cuenta sin autorizaci칩n de sus padres o tutores, eliminaremos la cuenta de inmediato.</p>
                    
                    <h3>11. Modificaciones</h3>
                    <p>Podemos actualizar esta Pol칤tica de Privacidad en cualquier momento. Notificaremos los cambios relevantes a trav칠s del sitio web o correo electr칩nico. Si contin칰as usando la plataforma tras dichos cambios, se entender치 que los aceptas.</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="acceptPrivacyFromModal()">
                    <i class="fas fa-check"></i>
                    Entendido
                </button>
                <button class="btn btn-outline" onclick="closePrivacyModal()">
                    Cerrar
                </button>
            </div>
        </div>
    </div>

    <!-- Contenedor del Chatbot -->
    <div id="chatbot-container"></div>

</body>
</html>
